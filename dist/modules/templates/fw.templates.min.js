F.ext({parse:function(ctx,r,e,E){function pO(a,b,c,d){return a[r](RegExp("{{#{"+c+"}each(?: *)(\\w+)(?: *)}}([\\s\\S]*?){{\\/{"+c+"}each}}","g"),function(a,e,f){return d="",b[e]&&b[e].forEach(function(a,g){d+=f.parseTag(c,"ctx['"+e+"']["+g+"]",b),d=d.parseIf(c,"ctx."+e+"["+g+"].",b),d.match(RegExp("{{#{"+(c+1)+"}each","g"))&&(d=pO(d,b[e][g],c+1))}),d})}function _e(a,b){return"{{{"==a.substr(0,3)&&"}}}"==a.slice(-3)?new Option(b)[F.H]:b}return r="replace",e=/{{(#+)else}}[\s\S]*/,E=/[\s\S]*\{{(#+)else}}/,String.prototype.parseIf=function(n,V,ctx,m,v){return this[r](RegExp("(?:{{#{"+n+"}if(?: *))(.*)(?: *)}}([\\s\\S]*?)(?:{{\\/{"+n+"}if}})","g"),function(p,c,d,f){m=c.match(/(^!|^not) */),v=V,m&&(c=c.replace(m[0],""),v="!"+v);try{f=eval(v+c)}catch(e){f=0}return d.match(e)?d[r](f?e:E,""):f?d:""})},String.prototype.parseTag=function(n,V,ctx){return this[r](RegExp("{+\\{#{"+n+"} *(?!else)([A-Za-z0-9_.]+) *}}+","g"),function(p,$1,f){try{f=eval(V.big?V:V+"['"+$1.replace(/\./g,"']['")+"']")}catch(e){}return f&&(f=f.big?f:f[$1]),_e(p,f?f:"")})},F(pO(this.html(),ctx,1).parseTag(0,"ctx",ctx).parseIf(1,"ctx.",ctx)[r](/{%(.*)%}/g,function(p,$1){return eval($1)}).trim())}});