F.ext({parse:function(ctx,r,e,E){function parseObject(h,ctx,n,s,t){return h[r](RegExp("{{#{"+n+"}each(?: *)(\\w+)(?: *)}}([\\s\\S]*?){{\\/{"+n+"}each}}","g"),function(p,a,b){return s="",ctx[a]&&ctx[a].forEach(function(obj,i){s+=b[r](parseTag(n),function(b,c){return t=ctx[a][i].big?ctx[a][i]:ctx[a][i][c],escapeHTML(b,t)}),s=s[r](parseIf(n),function(p,c,d,f){try{f=eval("ctx."+a+"["+i+"]."+c)}catch(e){f=!1}return d.match(e)?d[r](f?e:E,""):f?d:""}),s.match(RegExp("{{#{"+(n+1)+"}each","g"))&&(s=parseObject(s,ctx[a][i],n+1))}),s})}function escapeHTML(a,b){return"{{{"==a.substr(0,3)&&"}}}"==a.slice(-3)?new Option(b)[F.H]:b}function parseTag(a){return RegExp("{+\\{#{"+a+"} *(?!else)(\\w+) *}}+","g")}function parseIf(a){return RegExp("(?:{{#{"+a+"}if(?: *))(.*)(?: *)}}([\\s\\S]*?)(?:{{\\/{"+a+"}if}})","g")}return r="replace",e=/{{(#+)else}}[\s\S]*/,E=/[\s\S]*\{{(#+)else}}/,F(parseObject(this.html(),ctx,1)[r](parseTag(0),function(a,b){return escapeHTML(a,ctx[b])})[r](parseIf(1),function(a,b,c){return c[r](ctx[b]?e:E,"")})[r](/{%(.*)%}/g,function(p,$1){return eval($1)}).trim())}});